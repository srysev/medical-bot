<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>Medizinische Beratung - Dr. Hausarzt</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="topbar">
        <div class="brand">
          <div class="avatar medical-icon">üè•</div>
          <div>
            <div class="title">Dr. Hausarzt</div>
            <div class="subtitle">Europ√§ische Hausarztpraxis</div>
            <div id="usernameDisplay" class="username-display" style="display: none;">
              <span id="usernameText"></span>
              <a href="#" id="usernameEdit" onclick="editUsername(); return false;" class="username-edit-link"></a>
            </div>
          </div>
        </div>
        <div class="header-buttons">
          <button id="historyToggle" class="history-toggle" onclick="showConversationHistory()" title="Gespr√§chsverlauf anzeigen">
            <span class="history-text-full">Fr√ºhere Konversationen</span>
            <span class="history-text-short">Verlauf</span>
          </button>
          <button id="langToggle" class="lang-toggle" onclick="switchLanguage()" title="Auf Russisch wechseln">
            RU
          </button>
        </div>
      </header>

      <main class="chat">
        <div class="welcome-message">
          <div class="bubble bot">
            <!-- Welcome message will be populated by JavaScript based on language -->
          </div>
        </div>

        <div id="messages" class="messages"></div>

        <div id="typing" class="typing hidden" aria-hidden="true">
          <span class="dot"></span><span class="dot"></span
          ><span class="dot"></span>
        </div>

        <form id="composer" class="composer" autocomplete="off">
          <input
            id="input"
            class="input"
            type="text"
            placeholder="Beschreiben Sie Ihre Symptome oder Beschwerden..."
            maxlength="500"
          />
          <button id="send" class="send" aria-label="Senden" type="submit">
            ‚û§
          </button>
        </form>
      </main>
    </div>

    <!-- Username Modal -->
    <div id="usernameModal" class="username-modal" style="display: none;">
      <div class="username-modal-content">
        <h3 id="usernamePromptText">Willkommen! Wie sollen wir Sie nennen?</h3>
        <input type="text" id="usernameInput" class="username-input" placeholder="Ihr Name" maxlength="50">
        <div class="username-modal-buttons">
          <button id="usernameConfirm" onclick="confirmUsername()" class="username-btn username-btn-primary">Best√§tigen</button>
          <button id="usernameCancel" onclick="hideUsernameModal()" class="username-btn username-btn-secondary">Abbrechen</button>
        </div>
      </div>
    </div>

    <!-- Conversation History Modal -->
    <div id="historyModal" class="history-modal" style="display: none;">
      <div class="history-modal-content">
        <div class="history-header">
          <h3 id="historyTitle">Gespr√§chsverlauf</h3>
          <button onclick="hideConversationHistory()" class="history-close">√ó</button>
        </div>
        <div id="historyList" class="history-list">
          <!-- Conversation list will be populated by JavaScript -->
        </div>
        <div class="history-footer">
          <button id="closeHistoryBtn" onclick="hideConversationHistory()" class="username-btn username-btn-secondary">Schlie√üen</button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/static/app.js"></script>
  </body>
</html>